{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';  \n\nconst API_KEY = '49384745-99fbe35ac45d1d7712b9c9b0c'; \nconst BASE_URL = 'https://pixabay.com/api/';  \nconst PER_PAGE = 15;\n\nexport const fetchImages = async (query, page = 1) => {  \n  try {  \n    const response = await axios.get(BASE_URL, {  \n      params: {  \n        key: API_KEY,  \n        q: query,  \n        image_type: 'photo',  \n        orientation: 'horizontal',  \n        safesearch: true,  \n        per_page: PER_PAGE,  \n        page,  \n      },  \n    });  \n    return response.data; \n  } catch (error) {  \n    console.error('Error fetching images:', error); \n    throw error;  \n  }  \n};  ","import SimpleLightbox from 'simplelightbox';  \nimport 'simplelightbox/dist/simple-lightbox.min.css';  \n\nlet lightbox;\n\nexport const renderImages = (images) => {  \n    const gallery = document.querySelector('.gallery');  \n    gallery.insertAdjacentHTML('beforeend', images.map(image => `  \n        <li class=\"gallery-item\">  \n            <a href=\"${image.largeImageURL}\">  \n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />  \n            </a>  \n            <p>Likes: ${image.likes}</p>  \n            <p>Views: ${image.views}</p>  \n            <p>Comments: ${image.comments}</p>  \n            <p>Downloads: ${image.downloads}</p>  \n        </li>  \n    `).join(''));  \n\n    if (!lightbox) {  \n        lightbox = new SimpleLightbox('.gallery a', {  \n            captionsData: 'alt',  \n            captionDelay: 250,  \n        });  \n    } else {\n        lightbox.refresh();  \n    }\n};  \n\nexport const clearGallery = () => {  \n    document.querySelector('.gallery').innerHTML = '';  \n};  \n\nexport const showLoader = () => {  \n    document.querySelector('.loader').style.display = 'block';  \n};  \n\nexport const hideLoader = () => {  \n    document.querySelector('.loader').style.display = 'none';  \n};  \n\nexport const toggleLoadMoreBtn = (show) => {\n    document.querySelector('.load-more').style.display = show ? 'block' : 'none';\n};\n\nexport const smoothScroll = () => {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n        const { height } = galleryItem.getBoundingClientRect();\n        window.scrollBy({ top: height * 2, behavior: 'smooth' });\n    }\n};","import iziToast from 'izitoast'; \nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport {  \n  renderImages,  \n  showLoader,  \n  hideLoader,  \n  clearGallery,  \n  toggleLoadMoreBtn,  \n  smoothScroll,  \n} from './js/render-functions';\n\nconst form = document.querySelector('.form');  \nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async (event) => {  \n  event.preventDefault(); \n  currentQuery = event.target.elements['search-text'].value.trim(); \n\n  if (!currentQuery) {  \n    iziToast.error({ title: 'Error', message: 'Please enter a search term.' });  \n    return;\n  }  \n\n  currentPage = 1; \n  clearGallery();  \n  toggleLoadMoreBtn(false);  \n  showLoader();  \n\n  try {  \n    const { hits, totalHits: total } = await fetchImages(currentQuery, currentPage);\n    totalHits = total;\n    if (hits.length === 0) {\n      iziToast.warning({ title: 'No Results', message: 'No images found. Try again!' });  \n      return;  \n    }  \n    renderImages(hits);\n    toggleLoadMoreBtn(hits.length < totalHits);\n  } catch (error) {  \n    iziToast.error({ title: 'Error', message: 'An error occurred while fetching images.' });  \n  } finally {  \n    hideLoader();  \n  }  \n});  \n\nloadMoreBtn.addEventListener('click', async () => {  \n  currentPage += 1;  \n  showLoader();  \n\n  try {  \n    const { hits } = await fetchImages(currentQuery, currentPage);\n    renderImages(hits);\n    smoothScroll();\n    \n    if ((currentPage * 15) >= totalHits) {\n      toggleLoadMoreBtn(false);\n      iziToast.info({ title: 'End of Results', message: 'Sorry, but you have reached the end of search results.' });\n    }\n  } catch (error) {  \n    iziToast.error({ title: 'Error', message: 'An error occurred while fetching images.' });  \n  } finally {  \n    hideLoader();  \n  }  \n});"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","axios","error","lightbox","renderImages","images","image","SimpleLightbox","clearGallery","showLoader","hideLoader","toggleLoadMoreBtn","show","smoothScroll","galleryItem","height","form","loadMoreBtn","currentQuery","currentPage","totalHits","event","iziToast","hits","total"],"mappings":"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"}